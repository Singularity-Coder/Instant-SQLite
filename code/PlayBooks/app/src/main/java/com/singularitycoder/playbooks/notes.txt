
EDGE CASES:--------------------------------------------------
1. Calls
2. Headphone disconnect
3. Service gets killed on low battery maybe


FEATURES:--------------------------------------------------

1. Notification - clicks -> pending intent to foregroudn service -> intent to main frag to update player
2. Player - clicks -> send to foreground service -> update notification
3. Pdf preview images must be stored in internal files during book creation to avoid generating bitmaps on the fly in recycler adapter
4. Send only the currently playing sentence to player screen for display
5. Highlight spoken word in the sentence in player

Run a background worker converting all pdf to text and store books in db
Before storing text in db, trim all new line characters and unreadable ASCII code

DB - Book - position of periods, chapters, sentences
Use foreground service for player
First get files from file man, then in worker convert pdfs to text n insert text to db, from db listen to db inserts and in observer load list in view
Show instructions on how to convert ebook formats to pdf online

This pdf to text converter will face problems with programming books. Skip book conversion after 2 mins. maintain timer.


SQLITE LIMITATIONS:--------------------------------------------------

https://stackoverflow.com/questions/58425372/android-room-database-size#:~:text=The%20maximum%20size%20of%20a,140%2C000%20gigabytes%20or%20128%2C000%20gibibytes).

Maximum length of a string or BLOB Default size is 1 GB Max size is 2.147483647
Maximum Number Of Columns Default size is 2000 Max size is 32767
Maximum Length Of An SQL Statement Default size is 1 MB Max size is 1.073741824
Maximum Number Of Tables In A Join Default is 64 tables
Maximum Number Of Attached Databases Default is 10 Max size is 125
Maximum Number Of Rows In A Table Max Size is 18446744073.709552765
Maximum Database Size 140 tb but it will depends on your device disk size.

https://www.sqlite.org/limits.html


FOREGROUND SERVICE:--------------------------------------------------

Work Manager based Foreground service - https://www.droidcon.com/2023/11/15/a-guide-to-using-foreground-services-and-background-work-in-android-14/

https://developer.android.com/develop/background-work/services/foreground-services
https://developer.android.com/about/versions/14/changes/fgs-types-required#media
https://github.com/landomen/ForegroundService14Sample
https://medium.com/@sarafanshul/jni-101-introduction-to-java-native-interface-8a1256ca4d8e
https://github.com/szelinskip/MusicPlayer

Grant Notification permission
If you want the notification non-dismissable by the user, pass true into the setOngoing() method when you create your notification using Notification.Builder.

https://developer.android.com/guide/topics/ui/notifiers/notifications?hl=en#Actions
https://d.android.com/r/studio-ui/designer/material/notifications-behavior
https://developer.android.com/guide/topics/ui/notifiers/notifications?hl=en

TTS:--------------------------------------------------

https://android.googlesource.com/platform/frameworks/base/+/master/core/java/android/speech/tts/TextToSpeech.java
https://developer.android.com/reference/android/speech/tts/TextToSpeech

Max speech input is 4000 - get max length from TextToSpeech.getMaxSpeechInputLength() as per AOSP source

https://android-developers.googleblog.com/2009/09/introduction-to-text-to-speech-in.html

String myText1 = "Did you sleep well?";
String myText2 = "I hope so, because it's time to wake up.";
mTts.speak(myText1, TextToSpeech.QUEUE_FLUSH, null);
mTts.speak(myText2, TextToSpeech.QUEUE_ADD, null);

the first speak() request would interrupt whatever was currently being synthesized: the queue is flushed and the new utterance is queued, which places it at the head of the queue. The second utterance is queued and will be played after myText1 has completed.


ERRORS:--------------------------------------------------

android.os.FileUriExposedException: file:///storage/emulated/0/Download/The%20Enchanted%20April%20-%20Elizabeth%20von%20Arnim.pdf exposed beyond app through Intent.getData()
https://stackoverflow.com/a/38858040/6802949